<!DOCTYPE module SYSTEM "module.dtd">

<module name="vertical_ctrl_module_demo" dir="ctrl">
  <doc>
    <description>
        Demo Vertical Control Module.
        Only for rotorcraft firmware.
        Example on how to reads the sonar and directly control the thrust.
    </description>
    <define name="VERTICAL_CTRL_MODULE_AGL_ID" value="ABI_BROADCAST" description="Sender id of the AGL (sonar) ABI message"/>
    <section name="VERTICAL_CTRL_MODULE" prefix="VERTICAL_CTRL_MODULE_">
      <define name="PGAIN" value="0.40" description="P gain on height error"/>
      <define name="IGAIN" value="0.00" description="I gain on summed height error"/>
      <define name="VISION_METHOD" value="1" description="0 = fake vision, 1 = real vision"/>
      <define name="CONTROL_METHOD" value="1" description="0 = fixed gain control, 1 = adaptive gain control"/>
    </section>
  </doc>
  <settings>
    <dl_settings>
      <dl_settings NAME="VertCtrlModDemo">
	<dl_setting var="v_ctrl.nominal_thrust" min="0" step="0.001" max="1" module="ctrl/vertical_ctrl_module_demo" shortname="nominal_thrust"/>
      	<dl_setting var="v_ctrl.lp_factor" min="0" step="0.01" max="1" module="ctrl/vertical_ctrl_module_demo" shortname="lp_factor"/>
        <dl_setting var="v_ctrl.setpoint" min="-1" step="0.01" max="1" module="ctrl/vertical_ctrl_module_demo" shortname="div sp"/>
        <dl_setting var="v_ctrl.cov_set_point" min="-2" step="0.001" max="2" module="ctrl/vertical_ctrl_module_demo" shortname="cov_set_point"/>
        <dl_setting var="v_ctrl.cov_limit" min="0" step="0.01" max="5" module="ctrl/vertical_ctrl_module_demo" shortname="cov_limit"/>
        <dl_setting var="v_ctrl.pgain" min="0" step="0.001" max="6" module="ctrl/vertical_ctrl_module_demo" shortname="pgain" param="VERTICAL_CTRL_MODULE_PGAIN"/>
        <dl_setting var="v_ctrl.igain" min="0" step="0.001" max="1" module="ctrl/vertical_ctrl_module_demo" shortname="igain" param="VERTICAL_CTRL_MODULE_IGAIN"/>
	<dl_setting var="v_ctrl.VISION_METHOD" min="0" step="1" max="1" module="ctrl/vertical_ctrl_module_demo" shortname="VISION_METHOD" param="VERTICAL_CTRL_MODULE_VISION_METHOD"/>
	<dl_setting var="v_ctrl.CONTROL_METHOD" min="0" step="1" max="1" module="ctrl/vertical_ctrl_module_demo" shortname="CONTROL_METHOD" param="VERTICAL_CTRL_MODULE_CONTROL_METHOD"/>
        <dl_setting var="v_ctrl.pgain_adaptive" min="0" step="0.01" max="5.0" module="ctrl/vertical_ctrl_module_demo" shortname="pgain_adaptive"/>
        <dl_setting var="v_ctrl.igain_adaptive" min="0" step="0.001" max="0.5" module="ctrl/vertical_ctrl_module_demo" shortname="igain_adaptive"/>
      </dl_settings>
    </dl_settings>
  </settings>

  <header>
    <file name="vertical_ctrl_module_demo.h"/>
  </header>

  <makefile>
    <file name="vertical_ctrl_module_demo.c"/>
  </makefile>

</module>
